<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>校正题目</title>
	<link rel="stylesheet" href="../css/exam/editor.css" />
	<link rel="stylesheet" href="../css/exam/problem.css" />
	<link rel="stylesheet" href="../css/bootstrap/bootstrap.3.3.5.min.css">
	<link rel="stylesheet" href="../css/common.css">
	<style type="text/css">
		.edit-title {
			display: inline-block;
			float: right;
			padding:4px 10px;
			margin: 2px 4px;
		}
		.border-container {
			border: 1px solid #ccc;
			padding: 10px;
		}
	</style>
</head>
<body>
	<header class="ui-page-header">
		<div class="mini-title">当前位置：校正题目</div>
	</header>
	<article class="container-fluid">
		<header class="border-container mb6">
			<h4>审核结果</h4>
			<div>审核结果：审核未通过</div>
			<div>原因：<span class="text-danger">请补充解题思路</span></div>
		</header>
		<header id="error-status">
			<label class="radio-inline">请检查报错题目情况：</div>
			<label class="radio-inline">
				<input type="radio" name="error-status" value="0"> 有错可以修改
			</label>
			<label class="radio-inline">
				<input type="radio" name="error-status" value="1"> 有错但无法修改
			</label>
			<label class="radio-inline">
				<input type="radio" name="error-status" value="2"> 没有错误不用修改
			</label>
		</header>
		<div class="ui-flex-container">
			<section class="flex2">
				<header class="h4">报错题目</header>
				<article  class="border-container">
					<div>错误类型：答案错误</div>
					<h4>题目</h4>
					<div>
						<div class="pt1"><!--B1--><img alt="学习宝" src="http://124.207.37.218:8088/5,0485c9eea718e5" style="vertical-align:middle;FLOAT:right;" data-width="195" data-height="160"><span class="qseq"></span>已知函数f（x）=Asin（ωx+φ）+b（A、ω＞0，0＜φ＜π，b为常数）一段图象如图所示． <br>（Ⅰ）求函数f（x）的解析式； <br>（Ⅱ）将函数y=f（x）的图象向左平移 <span class="MathXxb" mathtag="math" style="whiteSpace:nowrap;wordSpacing:normal;wordWrap:normal"><table cellpadding="-1" cellspacing="-1" style="margin-right:1px"><tbody><tr><td style="border-bottom:1px solid black">π</td></tr><tr><td>12</td></tr></tbody></table></span>个单位，再将所得图象上各点的横坐标扩大为原来的4倍，得到函数y=g（x）的图象．求函数g（x）的单调递增区间． <!--E1--></div>
					</div>
					<h4>答案</h4>
					<div>ABCD</div>
					<h4>解题思路</h4>
					<div>AAA</div>
					<h4>标签</h4>
					<div>
						<span class="label label-default">数学</span>
						<span class="label label-default">小学</span>
						<span class="label label-default">单选</span>
					</div>
				</article>
			</section>
			<section class="flex3 ml10">
				<header class="h4">错误修改</header>
				<article>
					<div id="edit-area" class="edit-area ml0">
						<div class="edit-box edit-body">
							<div class="edit-btns">
								<div class="edit-title">题目</div>
								<ul class="tr-bar">
									<ul class="tr-group">
										<li class="tr-btn tool-btn blod-" title="粗体" data-command="bold" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn italic-" title="斜体" data-command="italic" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn underline-" title="下划线" data-command="underline" data-param="">
											<input type="button">
										</li>
									</ul>
									<ul class="tr-group">
										<li class="tr-btn tool-btn insert-ul" title="无序列表" data-command="insertunorderedlist" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn insert-ol" title="有序列表" data-command="insertorderedlist" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn insert-img" title="插入图片" data-command="" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn insert-formula" title="插入公式" data-command="" data-param="">
											<input type="button">
										</li>
									</ul>
									<ul class="tr-group">
										<li class="tr-btn tool-btn delete-style" title="清除格式" data-command="" data-param="">
											<input type="button">
										</li>
									</ul>
								</ul>
							</div>
							<div class="edit-border">
								<div class="edittable" contenteditable="">
									<div class="pt1"><!--B1--><img alt="学习宝" src="http://124.207.37.218:8088/5,0485c9eea718e5" style="vertical-align:middle;FLOAT:right;" data-width="195" data-height="160"><span class="qseq"></span>已知函数f（x）=Asin（ωx+φ）+b（A、ω＞0，0＜φ＜π，b为常数）一段图象如图所示． <br>（Ⅰ）求函数f（x）的解析式； <br>（Ⅱ）将函数y=f（x）的图象向左平移 <span class="MathXxb" mathtag="math" style="whiteSpace:nowrap;wordSpacing:normal;wordWrap:normal"><table cellpadding="-1" cellspacing="-1" style="margin-right:1px"><tbody><tr><td style="border-bottom:1px solid black">π</td></tr><tr><td>12</td></tr></tbody></table></span>个单位，再将所得图象上各点的横坐标扩大为原来的4倍，得到函数y=g（x）的图象．求函数g（x）的单调递增区间． <!--E1--></div>
								</div>
							</div>
						</div>
						<div class="edit-box edit-answer">
							<div class="edit-btns">
								<div class="edit-title">答案</div>
								<ul class="tr-bar">
									<ul class="tr-group">
										<li class="tr-btn tool-btn  blod-" title="粗体" data-command="bold" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn  italic-" title="斜体" data-command="italic" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn  underline-" title="下划线" data-command="underline" data-param="">
											<input type="button">
										</li>
									</ul>
									<ul class="tr-group">
										<li class="tr-btn tool-btn  insert-ul" title="无序列表" data-command="insertunorderedlist" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn  insert-ol" title="有序列表" data-command="insertorderedlist" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn  insert-img" title="插入图片" data-command="" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn  insert-formula" title="插入公式" data-command="" data-param="">
											<input type="button">
										</li>
									</ul>
									<ul class="tr-group">
										<li class="tr-btn tool-btn  delete-style" title="清除格式" data-command="" data-param="">
											<input type="button">
										</li>
									</ul>
								</ul>
							</div>
							<div class="edit-border">
								<div class="edittable" contenteditable="">ABCD</div>
							</div>
						</div>
						<div class="edit-box edit-analysis">
							<div class="edit-btns">
								<div class="edit-title">解题思路</div>
								<ul class="tr-bar">
									<ul class="tr-group">
										<li class="tr-btn tool-btn blod-" title="粗体" data-command="bold" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn italic-" title="斜体" data-command="italic" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn underline-" title="下划线" data-command="underline" data-param="">
											<input type="button">
										</li>
									</ul>
									<ul class="tr-group">
										<li class="tr-btn tool-btn insert-ul" title="无序列表" data-command="insertunorderedlist" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn insert-ol" title="有序列表" data-command="insertorderedlist" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn insert-img" title="插入图片" data-command="" data-param="">
											<input type="button">
										</li>
										<li class="tr-btn tool-btn insert-formula" title="插入公式" data-command="" data-param="">
											<input type="button">
										</li>
									</ul>
									<ul class="tr-group">
										<li class="tr-btn tool-btn delete-style" title="清除格式" data-command="" data-param="">
											<input type="button">
										</li>
									</ul>
								</ul>
							</div>
							<div class="edit-border">
								<div class="edittable" contenteditable="">AAA</div>
							</div>
						</div>
						<br class="edit-clear">
					</div>
					<div class="form-inline" id="correct-label">
						<label class="control-label">请选择标签：</label>
						<div class="form-group">
							<select class="form-control" name="grade" class="grade">
								<option value="">年级</option>
								<option value="1">小学</option>
								<option value="2">初中</option>
								<option value="3">高中</option>
							</select>
						</div>
						<div class="form-group">
							<select class="form-control" name="subject" class="subject">
								<option value="">学科</option>
								<option value="1">语文</option>
								<option value="2">数学</option>
								<option value="3">英语</option>
								<option value="4">化学</option>
								<option value="5">物理</option>
								<option value="6">生物</option>
								<option value="7">历史</option>
								<option value="8">地理</option>
								<option value="9">政治</option>
							</select>
						</div>
						<div class="form-group">
							<select class="form-control" name="type" class="type">
								<option value="">题型</option>
								<option value="1">单选</option>
								<option value="2">多选</option>
								<option value="3">填空</option>
								<option value="4">解答</option>
							</select>
						</div>
					</div>
				</article>
			</section>
		</div>
	</article>
	<footer class="text-center ui-page-footer">
		<a class="btn btn-default min-w100">返回</a>
		<button class="btn btn-primary min-w100 ml20" id="correct-submit">提交</button>
	</footer>
	<div id="image-input" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title"></h4>
				</div>
				<div class="modal-body"></div>
				<div class="modal-footer"></div>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
	<div id="formula-input" class="formula-input modal fade" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title"></h4>
				</div>
				<div class="modal-body"></div>
				<div class="modal-footer"></div>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
	<script type="text/javascript">
		MX.load({
			js: 'lib/sea',
			version: '150723a',
			success: function() {
				seajs.use(['lib/jquery', 'module/Editor'], function($, Editor) {
					var editArea = $('#edit-area'),
						errorStatus = $('#error-status'),
						correctLabel = $('#correct-label'),
						getLatex, container = $('<div>'),
						editorBody, editorAnswer, editorAnalysis;
					getLatex = function(content) {
						if(content) {
							container.html(content).find('.formula').each(function(i) {
								var formula = $(this);
								formula.after('<span class="latex">' + formula.data('latex') + '</span>');
							});
							return container.text();
						}
						return '';
					};
					editorBody = new Editor(editArea.find('.edit-body'));
					editorAnswer = new Editor(editArea.find('.edit-answer'));
					editorAnalysis = new Editor(editArea.find('.edit-analysis'));
					$('#correct-submit').on('click', function(e) {
						var el = $(this), data = {};
						data.status = +errorStatus.find('input:checked').val();
						if(data.status === undefined) {
							alert('请选择错误类型');
							return;
						}
						data.id = '';
						if(data.status === 0) {
							data.qsCType = correctLabel.find('.type').val();
							if(!data.qsCType) {
								alert('请选择题型');
								return;
							}
							data.qsCLearnphase = correctLabel.find('.grade').val();
							if(!data.qsCLearnphase) {
								alert('请选择学段');
								return;
							}
							data.qsCSubject = correctLabel.find('.subject').val();
							if(!data.qsCSubject) {
								alert('请选择学科');
								return;
							}
							data.qsCContext = editorBody.area.html();
							if(!data.qsCContext) {
								alert('题目描述不能为空');
								return;
							}
							data.qsCAnswer = editorAnswer.area.html();
							if(!data.qsCAnswer) {
								alert('答案不能为空');
								return;
							}
							data.qsCSolution = editorSolution.area.html();
							if(!data.qsCSolution) {
								alert('解题思路不能为空');
								return;
							}
							data.qsCContextLatex = getLatex(data.qsCContext);
							data.qsCAnswerLatex = getLatex(data.qsCAnswer);
						}
						$.ajax({
							url: window.basePath + 'questionCorrect/commitSingleQuestion',
							type: 'POST',
							data: data,
							dataType: 'json',
							success: function(data) {
								if(data.status === 0) {

								} else {
									alert(data.msg);
								}
							}
						});
					});

				});
			}
		});
	</script>
</body>
</html>
