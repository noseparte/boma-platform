define("page/login",["lib/jquery","util/ajaxPromise","module/Validator"],function(t){"use strict";var o,n=t("lib/jquery"),i=t("util/ajaxPromise"),a=t("module/Validator");return o=function(t,o){var i=this;i._body=n("#"+t),i=n.extend(i,o),i.init(),i.addEvent()},o.prototype={init:function(){this._account=this._body.find(".account").focus(),this._password=this._body.find(".password")},addEvent:function(){var t=this;n(document).on("keydown",function(o){13===o.keyCode&&t.submit()}),t._body.on("click",".confirm",function(o){o.preventDefault(),t.submit()}).on("click",".reset",function(o){t._account.val("").focus(),t._password.val("")})},submit:function(){var t,o=this,n={};return n.loginId=o._account.val().trim(),n.password=o._password.val(),t=new a,t.add(n.loginId,"isNotEmpty",function(){alert("用户名不能为空")}).add(n.password,"isNotEmpty",function(){alert("密码不能为空")}),t.start()?void i({url:window.basePath+"login/userLogin",type:"POST",data:n,dataType:"json"}).then(function(t){document.location.href=t.result[0].url}):!1}},o});